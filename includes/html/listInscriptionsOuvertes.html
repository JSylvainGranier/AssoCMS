<h1>Inscriptions Ouvertes</h1>

$adminForOtherFamilies$

<p style="display : $displayCreateAccountParapgraph$;">

Pour utiliser les inscriptions en ligne, il faut d'abord que l'on sache qui vous êtes <i class="fa fa-smile-o" aria-hidden="true"></i> !

<br />
<br />

Si vous êtes déjà membre de $site_title$, vous devez simplement vous identifier avec votre adresse email et votre mot de passe. <br />
Fermez les yeux, et glissez jusqu'au bas de cette page jusqu'à arriver au formulaire de connexion habituel. 

<br />
<br />

Pour les nouveaux adhérents qui souhaitent rejoindre notre association, et seulement dans ce cas-là, vous devez d'abord renseigner les informations d'état civil, et ensuite vous inscrire dans la foulée. 

<br />
<br />

Si vous rencontrez des difficultés pour vous inscrire, vous pouvez nous adresser votre demande par email. 

</p>


<div id="produitListContainer">
	
</div>

<template id="produitTemplate">
	<div class="produitContainer">
		<h2 produitTitre></h2>
		<div produitDescription>
		</div>
		<div>
		J'inscris : 
			<ul produitPersonnesAInscrire>
			</ul>
		</div>
		<div produitConditions>
		</div>
	</div>
</template>

<script>

var renderProduitList = function(){
	var pListContainer = document.getElementById("produitListContainer");
	var produitTemplate = document.querySelector("#produitTemplate");
	
	for (var prod in config.produits) {
	    if (Object.prototype.hasOwnProperty.call(config.produits, prod)) {
	    	var produit = config.produits[prod];
	    	if(!produit.accesDirect){
				continue;
			}
		
			var clone = document.importNode(produitTemplate.content, true);
			clone.querySelector("h2[produitTitre]").innerHTML = produit.libelle;
			clone.querySelector("div[produitDescription]").innerHTML = produit.description;

			if(produit.conditionsLegales && produit.conditionsLegales.length > 20){
				clone.querySelector("div[produitConditions]").innerHTML = produit.conditionsLegales;
			}
			
			var listPersonnes = clone.querySelector("ul[produitPersonnesAInscrire]");
			listPersonnes.setAttribute("idProduit", produit.idProduit);
			
			config.famille.members.forEach(function(personne){
				var persCbx = document.createElement("LI");
				persCbx.innerHTML = "<label><input type='checkbox' name='produitPersonneCbx' value='"+personne.idPersonne+"' /> "+personne.prenom+" "+personne.nom+"</label>";
				persCbx.onChange = function(){
					var inscriptionEtInscriptionProduit = findOrCreateInscriptionForProduit(personne.idPersonne, produit.idProduit);
					if(!this.checked){
						inscriptionEtInscriptionProduit.souscripteurs
						non, ici, c'est pas bon. 
						Peut être qu'en javascript, je devrais plutpt avoir une seule ligne qui regroupe inscription et inscriprtion produit. 
						Et sur cette ligne, je rajoute une variable markedForDeletion
					}
				}
				
				listPersonnes.appendChild(persCbx);
			});
		  
			pListContainer.appendChild(clone);
	    }
	}
	

}

var findOrCreateInscriptionForProduit = function(idPersonne, idProduit){
	parmis config.inscriptions, retourner ou créer, ajouter et retourner un objet qui corresponde à l'inscription de idPersonne au produit idProduit. 
	En ayant populé les autres champs. 
	
	//Et plus tard, en ayant rajouté les produits dépendants, et les règlements dépendants. 
}

var config = $config$;

renderProduitList();


</script>